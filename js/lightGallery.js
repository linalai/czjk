!function(e){"use strict";e.fn.lightGallery=function(i){var t,a,l,n,s,d,o,r,c,h,u,m,v,p={mode:"slide",useCSS:!0,easing:"linear",speed:1e3,closable:!0,loop:!1,auto:!1,pause:4e3,escKey:!0,rel:!1,lang:{allPhotos:"All photos"},exThumbImage:!1,index:!1,thumbnail:!0,caption:!1,captionLink:!1,desc:!1,counter:!1,controls:!0,hideControlOnEnd:!1,mobileSrc:!1,mobileSrcMaxWidth:640,swipeThreshold:50,vimeoColor:"CCCCCC",videoAutoplay:!0,videoMaxWidth:855,dynamic:!1,dynamicEl:[],onOpen:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onBeforeClose:function(){},onCloseAfter:function(){}},f=e(this),g=!1,y='<div id="lightGallery-outer"><div id="lightGallery-Gallery"><div id="lightGallery-slider"></div><a id="lightGallery-close" class="close"></a></div></div>',C=void 0!==document.createTouch||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,b=!1,S=!1,w=!1,x=e.extend(!0,{},p,i),G={init:function(){f.each(function(){var i=e(this);1==x.dynamic?(t=x.dynamicEl,a=0,c=a,q.init(a)):(t=e(this).children(),t.click(function(l){if(1==x.rel&&i.data("rel")){var n=i.data("rel");t=e('[data-rel="'+n+'"]').children()}else t=i.children();l.preventDefault(),l.stopPropagation(),a=t.index(this),c=a,q.init(a)}))})}},q={init:function(){this.start(),this.build()},start:function(){this.structure(),this.getWidth(),this.closeSlide()},build:function(){this.loadContent(a),this.addCaption(),this.addDesc(),this.counter(),this.slideTo(),x.showList?this.buildThumbnail(1):this.buildThumbnail(),this.keyPress(),this.slide(x.index?x.index:a),this.touch(),this.enableTouch(),setTimeout(function(){l.addClass("opacity")},50)},structure:function(){e("body").append(y).addClass("lightGallery"),n=e("#lightGallery-outer"),l=e("#lightGallery-Gallery"),s=l.find("#lightGallery-slider");var i="";if(1==x.dynamic)for(var a=0;a<x.dynamicEl.length;a++)i+='<div class="lightGallery-slide"></div>';else t.each(function(){i+='<div class="lightGallery-slide"></div>'});s.append(i),d=l.find(".lightGallery-slide")},closeSlide:function(){var i=this;x.closable&&e(".lightGallery-slide").on("click",function(i){e(i.target).is(".lightGallery-slide")}),e("#lightGallery-close").bind("click touchend",function(){i.destroy()})},getWidth:function(){var i=function(){m=e(window).width()};e(window).bind("resize.lightGallery",i())},doCss:function(){var e=function(){for(var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],i=document.documentElement,t=0;t<e.length;t++)if(e[t]in i.style)return!0};return x.useCSS&&e()?!0:!1},enableTouch:function(){var i=this;if(C){var t={},a={};e("body").on("touchstart.lightGallery",function(e){a=e.originalEvent.targetTouches[0],t.pageX=e.originalEvent.targetTouches[0].pageX,t.pageY=e.originalEvent.targetTouches[0].pageY}),e("body").on("touchmove.lightGallery",function(e){var i=e.originalEvent;a=i.targetTouches[0],e.preventDefault()}),e("body").on("touchend.lightGallery",function(){var e=a.pageX-t.pageX,l=x.swipeThreshold;e>=l?(i.prevSlide(),clearInterval(v)):-l>=e&&(i.nextSlide(),clearInterval(v))})}},touch:function(){var i,t,a=this;e(".lightGallery").bind("mousedown",function(e){e.stopPropagation(),e.preventDefault(),i=e.pageX}),e(".lightGallery").bind("mouseup",function(e){e.stopPropagation(),e.preventDefault(),t=e.pageX,t-i>20?a.prevSlide():i-t>20&&a.nextSlide()})},isVideo:function(e){var i=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),t=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i);return i||t?!0:void 0},loadVideo:function(e,i,t){var a=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),l=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),n="";return a?(i=x.videoAutoplay===!0&&i===!0?"?autoplay=1&rel=0&wmode=opaque":"?wmode=opaque",n='<iframe id="video'+t+'" width="560" height="315" src="//www.youtube.com/embed/'+a[1]+i+'" frameborder="0" allowfullscreen></iframe>'):l&&(i=x.videoAutoplay===!0&&i===!0?"autoplay=1&amp;":"",n='<iframe id="video'+t+'" width="560" height="315"  src="http://player.vimeo.com/video/'+l[1]+"?"+i+"byline=0&amp;portrait=0&amp;color="+x.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'),'<div class="video_cont" style="max-width:'+x.videoMaxWidth+'px !important;"><div class="video">'+n+"</div></div>"},loadContent:function(i){var a,l,n,s,o=this,r=t.length-i;o.autoStart(),s=x.mobileSrc===!0&&m<=x.mobileSrcMaxWidth?1==x.dynamic?x.dynamicEl[0].mobileSrc:t.eq(i).attr("data-responsive-src"):1==x.dynamic?x.dynamicEl[0].src:t.eq(i).attr("data-src"),o.isVideo(s)?(d.eq(i).prepend(o.loadVideo(s,!0,i)),n=e("iframe"),x.auto&&x.videoAutoplay===!0&&clearInterval(v)):(d.eq(i).prepend('<img src="'+s+'" />'),n=e("img")),t.length>1&&d.eq(i).find(n).on("load error",function(){for(a=0;i-1>=a;a++){var e;e=x.mobileSrc===!0&&m<=x.mobileSrcMaxWidth?1==x.dynamic?x.dynamicEl[i-a-1].mobileSrc:t.eq(i-a-1).attr("data-responsive-src"):1==x.dynamic?x.dynamicEl[i-a-1].src:t.eq(i-a-1).attr("data-src"),d.eq(i-a-1).prepend(o.isVideo(e)?o.loadVideo(e,!1,i-a-1):'<img src="'+e+'" />')}for(l=1;r>l;l++){var e;e=x.mobileSrc===!0&&m<=x.mobileSrcMaxWidth?1==x.dynamic?x.dynamicEl[i+l].mobileSrc:t.eq(i+l).attr("data-responsive-src"):1==x.dynamic?x.dynamicEl[i+l].src:t.eq(i+l).attr("data-src"),d.eq(i+l).prepend(o.isVideo(e)?o.loadVideo(e,!1,i+l):'<img src="'+e+'" />')}})},addCaption:function(){if(x.caption===!0){var e,i=!1;for(e=0;e<t.length;e++)if(i=1==x.dynamic?x.dynamicEl[e].caption:t.eq(e).attr("data-title"),("undefined"==typeof i||null==i)&&(i="image "+e),x.captionLink===!0){var a=t.eq(e).attr("data-link");a="undefined"!=typeof a&&""!==a?a:"#",d.eq(e).append('<div class="info group"><a href="'+a+'" class="title">'+i+"</a></div>")}else d.eq(e).append('<div class="info group"><span class="title">'+i+"</span></div>")}},addDesc:function(){if(x.desc===!0){var e,i=!1;for(e=0;e<t.length;e++)i=1==x.dynamic?x.dynamicEl[e].desc:t.eq(e).attr("data-desc"),("undefined"==typeof i||null==i)&&(i="image "+e),x.caption===!1?d.eq(e).append('<div class="info group"><span class="desc">'+i+"</span></div>"):d.eq(e).find(".info").append('<span class="desc">'+i+"</span>")}},counter:function(){if(x.counter===!0){var i=e("#lightGallery-slider > div").length;l.append("<div id='lightGallery_counter'><span id='lightGallery_counter_current'></span> / <span id='lightGallery_counter_all'>"+i+"</span></div>")}},buildThumbnail:function(i){if(x.thumbnail===!0&&t.length>1){var a=this;l.append('<div class="thumb_cont"><div class="thumb_info"><span class="close ib"><i class="bUi-iCn-rMv-16" aria-hidden="true"></i></span></div><div class="thumb_inner"></div></div>'),h=l.find(".thumb_cont"),o.after('<a class="cLthumb"></a>'),i?this.getList():l.find(".cLthumb").bind("click touchend",function(){a.getList()}),l.find(".close").bind("click touchend",function(){h.removeClass("open")});var n,s=l.find(".thumb_info"),d=l.find(".thumb_inner"),r="";if(1==x.dynamic)for(var c=0;c<x.dynamicEl.length;c++)n=x.dynamicEl[c].thumb,r+='<div class="thumb"><img src="'+n+'" /></div>';else t.each(function(){n=x.exThumbImage===!1||"undefined"==typeof e(this).attr(x.exThumbImage)||null==e(this).attr(x.exThumbImage)?e(this).find("img").attr("src"):e(this).attr(x.exThumbImage),r+='<div class="thumb"><img src="'+n+'" /></div>'});d.append(r),u=d.find(".thumb"),u.bind("click touchend",function(){b=!0;var i=e(this).index();u.removeClass("active"),e(this).addClass("active"),a.slide(i),clearInterval(v)}),s.prepend('<span class="ib count">'+x.lang.allPhotos+" ("+u.length+")</span>");var m=u.length*(u.width()+10);e(".thumb_inner").width(m)}},getList:function(){var e=this;h.addClass("open"),e.doCss()&&"slide"===x.mode&&(d.eq(a).prevAll().removeClass("nextSlide").addClass("prevSlide"),d.eq(a).nextAll().removeClass("prevSlide").addClass("nextSlide"))},slideTo:function(){var e=this;x.controls===!0&&t.length>1&&(l.append('<div id="lightGallery-action"><a id="lightGallery-prev"></a><a id="lightGallery-next"></a></div>'),o=l.find("#lightGallery-prev"),r=l.find("#lightGallery-next"),o.bind("click",function(){e.prevSlide(),clearInterval(v)}),r.bind("click",function(){e.nextSlide(),clearInterval(v)}))},autoStart:function(){var e=this;x.auto===!0&&(v=setInterval(function(){a=a+1<t.length?a:-1,a++,e.slide(a)},x.pause))},keyPress:function(){var i=this;e(window).bind("keyup.lightGallery",function(e){e.preventDefault(),e.stopPropagation(),37===e.keyCode&&(i.prevSlide(),clearInterval(v)),38===e.keyCode&&x.thumbnail===!0?h.hasClass("open")||(i.doCss()&&"slide"===x.mode&&(d.eq(a).prevAll().removeClass("nextSlide").addClass("prevSlide"),d.eq(a).nextAll().removeClass("prevSlide").addClass("nextSlide")),h.addClass("open")):39===e.keyCode&&(i.nextSlide(),clearInterval(v)),40===e.keyCode&&x.thumbnail===!0?h.hasClass("open")&&h.removeClass("open"):x.escKey===!0&&27===e.keyCode&&(x.thumbnail===!0&&h.hasClass("open")?h.removeClass("open"):i.destroy())})},nextSlide:function(){var e=this;a=d.index(d.eq(c)),a+1<t.length?(a++,e.slide(a)):x.loop?(a=0,e.slide(a)):"fade"===x.mode&&x.thumbnail===!0&&t.length>1&&h.addClass("open"),x.onSlideNext.call(this)},prevSlide:function(){var e=this;a=d.index(d.eq(c)),a>0?(a--,e.slide(a)):x.loop?(a=t.length-1,e.slide(a)):"fade"===x.mode&&x.thumbnail===!0&&t.length>1&&h.addClass("open"),x.onSlidePrev.call(this)},slide:function(i){g&&(s.hasClass("on")||s.addClass("on"),this.doCss()&&""!==x.speed&&(s.hasClass("speed")||s.addClass("speed"),w===!1&&(s.css("transition-duration",x.speed+"ms"),w=!0)),this.doCss()&&""!==x.easing&&(s.hasClass("timing")||s.addClass("timing"),S===!1&&(s.css("transition-timing-function",x.easing),S=!0)),x.onSlideBefore.call(this)),"slide"===x.mode?(this.doCss()&&!s.hasClass("slide")&&s.addClass("slide"),this.doCss()||g?!this.doCss()&&g&&s.animate({left:100*-i+"%"},x.speed,x.easing):s.css({left:100*-i+"%"})):"fade"===x.mode&&(this.doCss()&&!s.hasClass("fadeM")?s.addClass("fadeM"):this.doCss()||s.hasClass("animate")||s.addClass("animate"),this.doCss()||g?!this.doCss()&&g&&(d.eq(c).fadeOut(x.speed,x.easing),d.eq(i).fadeIn(x.speed,x.easing)):(d.fadeOut(100),d.eq(i).fadeIn(100))),i+1>=t.length&&x.auto&&x.loop===!1&&clearInterval(v),d.eq(c).removeClass("current"),d.eq(i).addClass("current"),this.doCss()&&"slide"===x.mode&&(b===!1?(e(".prevSlide").removeClass("prevSlide"),e(".nextSlide").removeClass("nextSlide"),d.eq(i-1).addClass("prevSlide"),d.eq(i+1).addClass("nextSlide")):(d.eq(i).prevAll().removeClass("nextSlide").addClass("prevSlide"),d.eq(i).nextAll().removeClass("prevSlide").addClass("nextSlide"))),x.thumbnail===!0&&t.length>1&&(u.removeClass("active"),u.eq(i).addClass("active")),x.controls&&x.hideControlOnEnd&&x.loop===!1&&(0===i?o.addClass("disabled"):i===t.length-1?r.addClass("disabled"):o.add(r).removeClass("disabled")),c=i,g===!1?x.onOpen.call(this):x.onSlideAfter.call(this),g=!0,b=!1,x.counter&&e("#lightGallery_counter_current").text(i+1)},destroy:function(){x.onBeforeClose.call(this),g=!1,S=!1,w=!1,b=!1,clearInterval(v),e(".lightGallery").off("mousedown mouseup"),e("body").off("touchstart.lightGallery touchmove.lightGallery touchend.lightGallery"),e(window).off("resize.lightGallery keyup.lightGallery"),l.addClass("fadeM"),setTimeout(function(){n.remove(),e("body").removeClass("lightGallery")},500),x.onCloseAfter.call(this)}};return G.init(),this}}(jQuery);